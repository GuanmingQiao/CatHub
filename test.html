<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="./js/libgif.js"></script>
    <script type="text/javascript" src="./js/rubbable.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>
        Example gif
    </title>
</head>

<body>
<center>
    <h1>Example with controls and no auto-play</h1>
    <img id="dataStore" src="./assets/logo.jpg" rel:animated_src="./assets/catStock.gif" rel:auto_play="0" width="467" height="375" />
    <canvas id="myCanvas" width="467" height="375" style="border:1px solid #000000;"></canvas>
    <br>
    <script type="text/javascript">
        var sup1 = new SuperGif({ gif: document.getElementById('dataStore') } );
        sup1.load(function(){
            enterLoop(0, sup1.get_length())
        })
        function enterLoop(index, length){
            const canvas = document.getElementById("myCanvas")
            const ctx = canvas.getContext('2d');
            logo_image = new Image();
            logo_image.src = 'assets/logo.jpg';
            logo_image.onload = function(){
                const frame_image_src = sup1.get_canvas().toDataURL();
                frame_image = new Image();
                frame_image.src = frame_image_src;
                frame_image.onload = function(){
                    ctx.drawImage(frame_image, 0, 0);
                    ctx.drawImage(logo_image, 0, 0);
                    sup1.move_to(index)
                    index++;
                    setTimeout(function() {
                        enterLoop(index % length, length);
                    }, 500)

                }
            }
        }
    </script>



    <h1>Example with rubbing and auto-play on</h1>
    <img id="example2" src="./assets/no-image-place-holder.gif" rel:auto_play="1" width="467" height="375" rel:rubbable="1" />
    <br>
    <script type="text/javascript">
        var sup2 = new RubbableGif({ gif: document.getElementById('example2') } );
        sup2.load();
    </script>

    <br><br>
    <p>Image via <a href="http://mlkshk.com/p/IP08">mlkshk</a></p>
</center>

</body>

</html>